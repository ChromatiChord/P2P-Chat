(this.webpackJsonpp2p_boilerplate=this.webpackJsonpp2p_boilerplate||[]).push([[0],{77:function(e,t,n){},79:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=79},92:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(26),c=n.n(s),o=(n(77),n(8)),i=n(49),j=n(13),b=n(36),l=n(16),u=n(130),d=n(131),h=n(127),x=n(128),p=n(51);var O=n(2);var g=function(e){var t=e.id===e.messageItem.senderID,n=new Date,r="".concat(n.getHours(),":").concat(n.getMinutes());return Object(O.jsxs)(u.a,{sx:{margin:"10px",fontFamily:"Roboto",float:t?"":"right"},children:[Object(O.jsxs)("div",{style:{color:"grey",fontSize:"10px",marginLeft:"12px"},children:[e.messageItem.senderID,"  ",r]}),Object(O.jsx)(u.a,{sx:{borderRadius:"20px",width:"25vw",bgcolor:t?"#3283a8":"#6794a8",color:"white",overflowWrap:"anywhere",padding:"10px",paddingLeft:"15px"},children:e.messageItem.message})]})};var f=function(e){var t=Object(l.a)(e.ownID).join(""),n=Object(p.sha224)(e.ownID+e.partnerID),a=Object(p.sha224)(e.partnerID+e.ownID),s=Object(r.useState)([]),c=Object(o.a)(s,2),i=c[0],j=c[1],f=Object(r.useState)("____"),m=Object(o.a)(f,2),v=m[0],I=m[1],w=Object(b.usePeerState)({senderID:"setup",message:""},{brokerId:n}),D=Object(o.a)(w,5),_=(D[0],D[1]),y=(D[2],D[3]);function C(){if("____"!==v){var t={senderID:e.ownID,message:v};_(t),j(i.concat([t]))}}D[4];var P=Object(b.useReceivePeerState)(a),S=Object(o.a)(P,3),F=S[0],T=(S[1],S[2],function(){var e=Object(r.useRef)(!0);return Object(r.useEffect)((function(){e.current=!1}),[]),e.current}());return Object(r.useEffect)((function(){T||"setup"!==F.senderID&&j(i.concat([{senderID:F.senderID,message:F.message}]))}),[F]),Object(r.useEffect)((function(){T||console.log(y)}),[y]),Object(O.jsxs)(u.a,{sx:{display:"flex",margin:"50px",justifyContent:"space-evenly"},children:[Object(O.jsx)(u.a,{sx:{border:"1px solid grey",width:"20vw",height:"75vh",borderRadius:"15px",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(O.jsxs)("center",{children:[Object(O.jsxs)(d.a,{sx:{fontFamily:"Roboto"},children:["Connected To: ",Object(O.jsx)("br",{}),e.partnerID]}),Object(O.jsx)(h.a,{id:"outlined-helperText",label:"Message",onChange:function(e){I(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&C()}}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)(x.a,{variant:"outlined",onClick:function(){return C()},children:"Send Message"})]})}),Object(O.jsx)(u.a,{sx:{border:"1px solid grey",width:"50vw",height:"75vh",borderRadius:"15px",overflow:"auto",minHeight:"0px",display:"flex",justifyContent:"flex-end",flexDirection:"column"},children:i.map((function(e){return Object(O.jsx)("div",{children:Object(O.jsx)(g,{messageItem:e,id:t})},function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}()+e.message)}))})]})};var m=function(e){var t=Object(j.g)();return Object(O.jsxs)("center",{children:[Object(O.jsx)(d.a,{variant:"h2",sx:{fontFamily:"Roboto",margin:"14px"},children:"Peer 2 Peer Chat"}),Object(O.jsxs)(d.a,{sx:{fontFamily:"Roboto"},children:["A simple peer to peer chat app. ",Object(O.jsx)("br",{}),"Both you and your peer can choose any name you wish, share those names ",Object(O.jsx)("br",{}),"with each other, and connect over a secure two way connection to chat!"]}),Object(O.jsx)(h.a,{id:"outlined-helperText",label:"Your Username",helperText:"(Share this with your peer)",onChange:function(t){e.setownID(t.target.value)},sx:{marginTop:"20px"}}),Object(O.jsx)("br",{}),Object(O.jsx)(h.a,{id:"outlined-helperText",label:"Peer Username",helperText:"(Username you wish to connect to)",onChange:function(t){e.setPartnerID(t.target.value)},sx:{margin:"14px"}}),Object(O.jsx)("br",{}),Object(O.jsx)(x.a,{variant:"outlined",onClick:function(){"____"!==e.ownID&&"____"!==e.partnerID&&(e.setIsLogged(!0),t("/P2PChat/message"))},children:"Establish Connection"})]})},v=function(){var e=Object(r.useState)("____"),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)("____"),c=Object(o.a)(s,2),b=c[0],l=c[1],u=Object(r.useState)(!1),d=Object(o.a)(u,2),h=d[0],x=d[1];return Object(O.jsx)(i.a,{children:Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{exact:!0,path:"/P2PChat",element:Object(O.jsx)(m,{ownID:n,setownID:a,partnerID:b,setPartnerID:l,setIsLogged:x})}),Object(O.jsx)(j.b,{path:"/P2PChat/message",element:h?Object(O.jsx)(f,{ownID:n,partnerID:b}):Object(O.jsx)(j.a,{replace:!0,to:"/P2PChat"})}),Object(O.jsx)(j.b,{path:"*",element:Object(O.jsx)(j.a,{replace:!0,to:h?"/P2PChat/message":"/P2PChat"})})]})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,132)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(v,{})}),document.getElementById("root")),I()}},[[92,1,2]]]);
//# sourceMappingURL=main.a21e1a35.chunk.js.map